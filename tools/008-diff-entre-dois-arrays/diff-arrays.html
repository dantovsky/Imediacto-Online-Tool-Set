<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous"> -->
    <link rel="stylesheet" href="../shared/css/boot.min.css">
    <link rel="stylesheet" href="../shared/css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Diff Arrays JS</title>
    <style>
        pre {
            width: 100%;
            height: 250px;
            box-shadow: 5px 5px 12px gray;
            padding: 12px;
        }

        #adifb,
        #bdiffa {
            overflow: hidden;
        }
    </style>
</head>

<body class="boot">
    <div class="container">
        <h1>Diff Arrays JS</h1>
        <p>Diff between two arrays.</p>

        <div class="row">
            <div class="col-12 col-sm-12 mb-3">
                <h2>Input options</h2>
                <div class="custom-control custom-radio">
                    <input type="radio" id="sep1" name="items-separation" value="lines" class="custom-control-input"
                        checked>
                    <label class="custom-control-label" for="sep1">From lines</label>
                </div>
                <div class="custom-control custom-radio">
                    <input type="radio" id="sep2" name="items-separation" value="commas" class="custom-control-input">
                    <label class="custom-control-label" for="sep2">Separeted by commas</label>
                </div>
                <div class="custom-control custom-radio">
                    <input type="radio" id="sep3" name="items-separation" value="spaces" class="custom-control-input">
                    <label class="custom-control-label" for="sep3">Separeted by space</label>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-12 mb-3">
                <button class="btn btn-secondary" onclick="toggleLines()" title="Switch view"><i
                        class="fa fa-list"></i></button>
            </div>
            <div class="col-sm-6">
                <h2>List A</h2>
                <textarea id="input-a" name="input-a" id="" cols="30" rows="10">
z
b
c</textarea>
            </div>
            <div class="col-sm-6">

                <h2>List B</h2>
                <textarea id="input-b" name="input-a" id="" cols="30" rows="10">
b
c
d
e
f</textarea>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6 col-sm-12 mb-3">
                <h2>Handle data as...</h2>
                <div class="custom-control custom-radio">
                    <input type="radio" id="set" name="set-or-list" value="set" class="custom-control-input" checked>
                    <label class="custom-control-label" for="set">As a set (no repeated elements)</label>
                </div>
                <div class="custom-control custom-radio">
                    <input type="radio" id="list" name="set-or-list" value="list" class="custom-control-input">
                    <label class="custom-control-label" for="list">As a list (with repeated elements)</label>
                </div>
            </div>
            <div class="col-md-6 col-sm-12 mb-3">
                <h2>Output data separetad...</h2>
                <div class="custom-control custom-radio">
                    <input type="radio" id="output1" name="items-separation-output" value="lines"
                        class="custom-control-input" checked>
                    <label class="custom-control-label" for="output1">By lines</label>
                </div>
                <div class="custom-control custom-radio">
                    <input type="radio" id="output2" name="items-separation-output" value="commas"
                        class="custom-control-input">
                    <label class="custom-control-label" for="output2">By commas</label>
                </div>
                <div class="custom-control custom-radio">
                    <input type="radio" id="output-" name="items-separation-output" value="spaces"
                        class="custom-control-input">
                    <label class="custom-control-label" for="output-">By space</label>
                </div>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-sm-12">
                <button onclick="applyDiffImproved()" class="btn bt-success mt-2"><i class="fa fa-chevron-right"></i>
                    Apply Diff</button>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-6">
                <h2>A diff B</h2>
                <pre><div id="adiffb"></div></pre>
                <i class="fa fa-chevron-right"></i>
            </div>
            <div class="col-sm-6">
                <h2>B diff A</h2>
                <pre><div id="bdiffa"></div></pre>
                <div class="inline-flex">
                    <div class="div-btn mr-1" onclick="sortItems('bdiffa')" title="Sort items"
                        area-label="Sort items">
                        <i class="fa fa-home"></i> 
                    </div>
                    <div class="div-btn mr-1" onclick="copyToClipboard('bdiffa')" title="Copy output to clipboard"
                        area-label="Copy the output to clipboard">
                        <i class="fa fa-copy"></i>
                        Copy to clipboard
                    </div>
                    <div id="check" class="none"></div>
                </div>
            </div>
            <div class="col-sm-6">
                <h2>A intersection B</h2>
                <pre><div id="ainterb"></div></pre>
            </div>
            <div class="col-sm-6">
                <h2>A union B</h2>
                <pre><div id="aunionb"></div></pre>
            </div>

            <div class="col-sm-6">
                <h2>Symmetric difference</h2>
                <pre><div id="difference"></div></pre>
            </div>

        </div>
    </div>

    <script>
        let separatorOutput = '\n';
        
        // Improved
        function applyDiffImproved() {
            
            const itemsSeparationsInput = document.querySelector('input[name="items-separation"]:checked').value;
            const setOrList = document.querySelector('input[name="set-or-list"]:checked').value;
            const itemsSeparationsOutput = document.querySelector('input[name="items-separation-output"]:checked').value;
            
            // Input sepearator
            let separatorInput = '\n';
            if (itemsSeparationsInput == 'lines') {
                separatorInput = '\n';
            } else if (itemsSeparationsInput == 'commas') {
                separatorInput = ',';
            } else if (itemsSeparationsInput == 'spaces') {
                separatorInput = ' ';
            }

            // Output sepearator
            if (itemsSeparationsOutput == 'lines') {
                separatorOutput = '\n';
            } else if (itemsSeparationsOutput == 'commas') {
                separatorOutput = ', ';
            } else if (itemsSeparationsOutput == 'spaces') {
                separatorOutput = ' ';
            }

            // Set or list
            const isSet = setOrList === 'set' ? true : false

            // Get items on input textareas
            let inputA = document.getElementById('input-a').value.split(separatorInput)
            let inputB = document.getElementById('input-b').value.split(separatorInput)

            if (separatorInput == '\n' || separatorInput == ',') {
                inputA = inputA.map(item => item.trim())
                inputB = inputB.map(item => item.trim())
            } else {
                // Remove empty elements
                inputA = inputA.filter(item => item != '')
                inputB = inputB.filter(item => item != '')
            }

            console.log(inputA)

            aDiffB = []
            bDiffA = []
            aInterB = []

            // Passing through arrayA :: get A diff B and A inter B
            for (item in inputA) {
                if (!inputB.includes(inputA[item])) {
                    aDiffB.push(inputA[item])
                } else {
                    aInterB.push(inputA[item])
                }
            }

            // Passing through arrayB :: get B diff A
            bDiffA = inputB.filter(item => !inputA.includes(item))

            // Writing results
            if (isSet) {
                document.getElementById('adiffb').innerHTML = [...new Set(aDiffB)].join(separatorOutput)
                document.getElementById('bdiffa').innerHTML = [...new Set(bDiffA)].join(separatorOutput)
                document.getElementById('ainterb').innerHTML = [...new Set(aInterB)].join(separatorOutput)
                document.getElementById('aunionb').innerHTML = [...new Set(inputA.concat(inputB))].join(separatorOutput)
                document.getElementById('difference').innerHTML = [...new Set(aDiffB.concat(bDiffA))].join(separatorOutput)
            } else {
                document.getElementById('adiffb').innerHTML = aDiffB.join(separatorOutput)
                document.getElementById('bdiffa').innerHTML = bDiffA.join(separatorOutput)
                document.getElementById('ainterb').innerHTML = aInterB.join(separatorOutput)
                document.getElementById('aunionb').innerHTML = inputA.concat(inputB).join(separatorOutput)
                document.getElementById('difference').innerHTML = aDiffB.concat(bDiffA).join(separatorOutput)
            }
        }

        function toggleLines() {
            const elems = document.querySelectorAll('.row > div')
            elems.forEach(elem => {
                elem.classList.contains('col-sm-12') ? elem.classList.remove('col-sm-12') : elem.classList.add('col-sm-12')
            })
        }

        function sortItems(id) {
            const element = document.getElementById(id)
            const content = element.innerText.split(separatorOutput).sort()
            console.log(content)
            element.innerText = content.join(separatorOutput)
        }

        // https://www.w3resource.com/javascript-exercises/javascript-array-exercise-23.php
        // https://stackoverflow.com/questions/9229645/remove-duplicate-values-from-js-array

    </script>
    <script src="../shared/js/scripts.js"></script>
</body>

</html>